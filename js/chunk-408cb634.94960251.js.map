{"version":3,"sources":["webpack:///./src/tool/validForm.js","webpack:///./src/views/Login.vue?05c4","webpack:///./src/views/Login.vue?297a","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["ValidForm","this","usernameReg","pwdReg","value","test","v1","v2","validForm","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","back","$event","registerGo","name","user","type","errorMessage","validUsername","model","callback","$$v","$set","expression","pwd","icon","checkPwd","validPwd","isLoading","isValid","loginBtn","_v","staticRenderFns","data","methods","$router","go","push","o","passForm","isOpen","users","JSON","parse","setTimeout","i","username","that","$toast","duration","message","isLogin","localStorage","setItem","stringify","emptyData","component"],"mappings":"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","file":"js/chunk-408cb634.94960251.js","sourcesContent":["class ValidForm {\r\n\r\n    constructor() {\r\n      //必须是字母开头, 4-8个字符\r\n      this.usernameReg = /^[A-Za-z]\\w{3,7}$/;\r\n  \r\n      //必须含有大写，小写，(字母数字_)组合，6-16位\r\n      this.pwdReg = /^(?=.*[A-Z])(?=.*[a-z])\\w{6,16}$/;\r\n    }\r\n  \r\n    //验证用户名\r\n    validUsername(value) {\r\n      return this.usernameReg.test(value);\r\n    }\r\n  \r\n    //验证密码\r\n    validPwd(value) {\r\n      return this.pwdReg.test(value)\r\n    }\r\n  \r\n    //验证两值相等\r\n    validEqual(v1, v2) {\r\n      return v1 === v2;\r\n    }\r\n  \r\n  }\r\n  \r\n  export const validForm = new ValidForm();","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=ab9091f2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=ab9091f2&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login animate__animated animate__fadeIn\"},[_c('div',{staticClass:\"jp_login_head\"},[_c('van-nav-bar',{attrs:{\"title\":\"登录\",\"right-text\":\"注册\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.back,\"click-right\":function($event){return _vm.registerGo({name:'register'})}}})],1),_c('div',{staticClass:\"jp_login_box\"},[_c('van-field',{attrs:{\"type\":_vm.user.type,\"label\":\"用户名\",\"placeholder\":\"请输入用户名\",\"error-message\":_vm.user.errorMessage},on:{\"input\":function($event){return _vm.validUsername(_vm.user.value)}},model:{value:(_vm.user.value),callback:function ($$v) {_vm.$set(_vm.user, \"value\", $$v)},expression:\"user.value\"}}),_c('van-field',{attrs:{\"type\":_vm.pwd.type,\"label\":\"密码\",\"right-icon\":_vm.pwd.icon,\"placeholder\":\"请输入密码\",\"error-message\":_vm.pwd.errorMessage},on:{\"click-right-icon\":function($event){return _vm.checkPwd(_vm.pwd)},\"input\":function($event){return _vm.validPwd(_vm.pwd.value)}},model:{value:(_vm.pwd.value),callback:function ($$v) {_vm.$set(_vm.pwd, \"value\", $$v)},expression:\"pwd.value\"}}),_c('van-button',{attrs:{\"type\":\"default\",\"color\":\"#ff464e\",\"loading\":_vm.isLoading,\"disabled\":!_vm.isValid},on:{\"click\":_vm.loginBtn}},[_vm._v(\"登录\")]),_c('div',{staticClass:\"jp_login_other\"},[_c('div',{staticClass:\"jp_login_text\"},[_vm._v(\"第三方账号快速登录\")]),_c('van-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"center\"}},[_c('van-col',{attrs:{\"span\":\"6\",\"justify\":\"center\",\"align\":\"center\"}},[_c('van-icon',{attrs:{\"name\":\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/tencent.png\"}})],1),_c('van-col',{attrs:{\"span\":\"6\",\"justify\":\"center\",\"align\":\"center\"}},[_c('van-icon',{attrs:{\"name\":\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/taobao.png\"}})],1),_c('van-col',{attrs:{\"span\":\"6\",\"justify\":\"center\",\"align\":\"center\"}},[_c('van-icon',{attrs:{\"name\":\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/sina.png\"}})],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login animate__animated animate__fadeIn\">\r\n    <div class=\"jp_login_head\">\r\n      <van-nav-bar\r\n        title=\"登录\"\r\n        right-text=\"注册\"\r\n        left-arrow\r\n        @click-left=\"back\"\r\n        @click-right=\"registerGo({name:'register'})\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"jp_login_box\">\r\n      <van-field\r\n        v-model=\"user.value\"\r\n        :type=\"user.type\"\r\n        label=\"用户名\"\r\n        placeholder=\"请输入用户名\"\r\n        :error-message=\"user.errorMessage\"\r\n        @input=\"validUsername(user.value)\"\r\n      />\r\n      <van-field\r\n        v-model=\"pwd.value\"\r\n        :type=\"pwd.type\"\r\n        label=\"密码\"\r\n        :right-icon=\"pwd.icon\"\r\n        placeholder=\"请输入密码\"\r\n        :error-message=\"pwd.errorMessage\"\r\n        @click-right-icon=\"checkPwd(pwd)\"\r\n        @input=\"validPwd(pwd.value)\"\r\n      />\r\n      <van-button\r\n        type=\"default\"\r\n        color=\"#ff464e\"\r\n        :loading=\"isLoading\"\r\n        @click=\"loginBtn\"\r\n        :disabled=\"!isValid\"\r\n      >登录</van-button>\r\n\r\n      <div class=\"jp_login_other\">\r\n        <div class=\"jp_login_text\">第三方账号快速登录</div>\r\n        <van-row type=\"flex\" justify=\"center\" align=\"center\">\r\n          <van-col span=\"6\" justify=\"center\" align=\"center\">\r\n            <van-icon name=\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/tencent.png\" />\r\n          </van-col>\r\n          <van-col span=\"6\" justify=\"center\" align=\"center\">\r\n            <van-icon name=\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/taobao.png\" />\r\n          </van-col>\r\n          <van-col span=\"6\" justify=\"center\" align=\"center\">\r\n            <van-icon name=\"//jp.juancdn.com/jpwebapp_v1/images_v1/user/sina.png\" />\r\n          </van-col>\r\n        </van-row>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { validForm } from \"../tool/validForm\";\r\n\r\nexport default {\r\n  name: \"login\",\r\n\r\n  data() {\r\n    return {\r\n      user: {\r\n        value: \"\",\r\n        errorMessage: \"\",\r\n        type: \"text\"\r\n      },\r\n      pwd: {\r\n        value: \"\",\r\n        errorMessage: \"\",\r\n        type: \"password\",\r\n        icon: \"closed-eye\"\r\n      },\r\n      isLoading: false,\r\n      isValid: false\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 返回上一层路由\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    // 路由跳转\r\n    registerGo(o) {\r\n      this.$router.push(o);\r\n    },\r\n\r\n    // 输入验证表单\r\n    validUsername(value) {\r\n      let isValid = validForm.validUsername(value);\r\n\r\n      this.user.errorMessage = isValid\r\n        ? \"\"\r\n        : \"用户名支持4-8个(字母数字_)组合，必须字母开头\";\r\n\r\n      this.passForm();\r\n    },\r\n\r\n    // 输入验证密码\r\n    validPwd(value) {\r\n      let isValid = validForm.validPwd(value);\r\n\r\n      this.pwd.errorMessage = isValid\r\n        ? \"\"\r\n        : \"密码支持6-16个(字母数字_)组合，必须含有大小写字母\";\r\n\r\n      this.passForm();\r\n    },\r\n\r\n    // 点击显示密码\r\n    checkPwd(value) {\r\n      let isOpen = value.type == \"password\";\r\n\r\n      value.type = isOpen ? \"text\" : \"password\";\r\n      value.icon = isOpen ? \"eye-o\" : \"closed-eye\";\r\n    },\r\n\r\n    // 点击登录\r\n    loginBtn() {\r\n      let that = this;\r\n\r\n      this.isLoading = true;\r\n      // 获取所有用户\r\n      let users = localStorage.getItem(\"users\");\r\n\r\n      users = users ? JSON.parse(users) : [];\r\n      // console.log(\"users ==>\", users);\r\n\r\n      let randomTime = Math.random() * 4 * 1000;\r\n\r\n      setTimeout(function() {\r\n        // 查找用户\r\n        for (let i = 0; i < users.length; i++) {\r\n          if (users[i].username == that.user.value) {\r\n            // 如果该用户存在\r\n            // 匹配密码\r\n            if (users[i].pwd == that.pwd.value) {\r\n              // 登录成功提示\r\n              that.$toast({\r\n                duration: 2000,\r\n                message: \"登录成功\"\r\n              });\r\n\r\n              // 改变按钮状态\r\n              that.isValid = false;\r\n              that.isLoading = false;\r\n\r\n              // 记录登录用户状态\r\n              let user = {\r\n                isLogin: true,\r\n                username: that.user.value\r\n              }\r\n\r\n              localStorage.setItem(\"user\", JSON.stringify(user));\r\n\r\n              // 登录成功后跳转首页\r\n              return that.$router.push(\"/home\");\r\n            } else {\r\n              // 用户名或者密码不正确提示\r\n              that.$toast({\r\n                duration: 2000,\r\n                message: \"用户名或者密码不正确\"\r\n              });\r\n\r\n              // 改变按钮状态\r\n              that.isValid = false;\r\n              that.isLoading = false;\r\n\r\n              // 清空输入框\r\n              setTimeout(function() {\r\n                that.emptyData();\r\n              }, 2000);\r\n\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        // 用户不存在提示\r\n        that.$toast({\r\n          duration: 2000,\r\n          message: \"该用户不存在\"\r\n        });\r\n\r\n        // 改变按钮状态\r\n        that.isValid = false;\r\n        that.isLoading = false;\r\n\r\n        // 清空输入框\r\n        setTimeout(function() {\r\n          that.emptyData();\r\n        }, 2000);\r\n      }, randomTime);\r\n    },\r\n\r\n    // 输入内容不为空时开启注册按钮\r\n    passForm() {\r\n      this.isValid =\r\n        this.user.errorMessage == \"\" &&\r\n        this.user.value != \"\" &&\r\n        this.pwd.errorMessage == \"\" &&\r\n        this.pwd.value != \"\";\r\n    },\r\n\r\n    // 清空数据\r\n    emptyData() {\r\n      this.user.value = \"\";\r\n      this.pwd.value = \"\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.login {\r\n  width: 100%;\r\n  background-color: #fff;\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  .jp_login_head {\r\n    /deep/.van-nav-bar {\r\n      background: #ff5a61;\r\n      .van-icon,\r\n      .van-nav-bar__title,\r\n      .van-nav-bar__text {\r\n        color: #ffffff;\r\n        font-size: 18px;\r\n      }\r\n      .van-nav-bar__text {\r\n        font-size: 15px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .jp_login_box {\r\n    background-color: #fff;\r\n    .van-button {\r\n      width: calc(100% - 20px);\r\n      font-size: 18px;\r\n      margin: 0 10px;\r\n    }\r\n  }\r\n\r\n  .jp_login_other {\r\n    margin-top: 50px;\r\n    text-align: center;\r\n    .jp_login_text {\r\n      color: #999;\r\n      padding: 30px 0;\r\n    }\r\n    /deep/.van-row {\r\n      .van-col {\r\n        height: 50px;\r\n        line-height: 50px;\r\n        .van-icon {\r\n          font-size: 50px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=ab9091f2&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=ab9091f2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab9091f2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}